(self.webpackChunkeasy_baas_frontend=self.webpackChunkeasy_baas_frontend||[]).push([[724],{44039:function(Q,A,t){"use strict";t.r(A);var u=t(20228),f=t(11382),_=t(11849),K=t(17462),B=t(76772),k=t(62350),y=t(24565),C=t(32059),w=t(57337),i=t(90636),I=t(34792),g=t(48086),E=t(3182),O=t(67294),T=t(67265),j=t(69126),N=t(15491),D=t(27398),S=t(64805),c=t(85893),L=function(){var v=(0,E.Z)((0,i.Z)().mark(function o(s){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return g.default.info("".concat(s.nodeName,"\u6B63\u5728\u542F\u52A8\u4E2D...")),r.prev=1,r.next=4,(0,N.EQ)(s.nodeName);case 4:return r.abrupt("return",!0);case 7:return r.prev=7,r.t0=r.catch(1),g.default.error("".concat(s.nodeName,"\u542F\u52A8\u5931\u8D25")),r.abrupt("return",!1);case 11:case"end":return r.stop()}},o,null,[[1,7]])}));return function(s){return v.apply(this,arguments)}}(),F=function(){var v=(0,E.Z)((0,i.Z)().mark(function o(s){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return g.default.info("".concat(s.nodeName,"\u6B63\u5728\u505C\u6B62\u4E2D...")),r.prev=1,r.next=4,(0,N.FB)(s.nodeName);case 4:return g.default.success("".concat(s.nodeName,"\u505C\u6B62\u6210\u529F")),r.abrupt("return",!0);case 8:return r.prev=8,r.t0=r.catch(1),g.default.error("".concat(s.nodeName,"\u505C\u6B62\u5931\u8D25")),r.abrupt("return",!1);case 12:case"end":return r.stop()}},o,null,[[1,8]])}));return function(s){return v.apply(this,arguments)}}(),M=function(o){S.m8.push({pathname:"/node/log",query:{name:o.nodeName}})},U=function(){var v=(0,E.Z)((0,i.Z)().mark(function o(s){return(0,i.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return g.default.info("".concat(s.nodeName,"\u6B63\u5728\u91CD\u542F...")),r.prev=1,r.next=4,(0,N.Zt)(s.nodeName);case 4:return r.abrupt("return",!0);case 7:return r.prev=7,r.t0=r.catch(1),g.default.error("".concat(s.nodeName,"\u91CD\u542F\u5931\u8D25")),r.abrupt("return",!1);case 11:case"end":return r.stop()}},o,null,[[1,7]])}));return function(s){return v.apply(this,arguments)}}(),W=function(){var v=(0,E.Z)((0,i.Z)().mark(function o(){var s,a=arguments;return(0,i.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=a.length>0&&a[0]!==void 0?a[0]:"",g.default.info("".concat(s,"\u6B63\u5728\u5347\u7EA7...")),n.prev=2,n.next=5,(0,N.rj)(s);case 5:return n.abrupt("return",!0);case 8:return n.prev=8,n.t0=n.catch(2),g.default.error("\u8282\u70B9".concat(s,"\u5347\u7EA7\u5931\u8D25")),n.abrupt("return",!1);case 12:case"end":return n.stop()}},o,null,[[2,8]])}));return function(){return v.apply(this,arguments)}}(),$=function(){var o,s=(0,O.useState)(!1),a=(0,w.Z)(s,2),r=a[0],n=a[1],e=(0,O.useRef)(),H=(0,O.useState)(0),G=(0,w.Z)(H,2),Y=G[0],z=G[1],R=function(){var b=(0,E.Z)((0,i.Z)().mark(function P(d){var p,m,h;return(0,i.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return z(Y+1),Y>10&&(n(!1),g.default.warning("\u62B1\u6B49\uFF0C\u7F51\u7EDC\u4E0D\u7ED9\u529B\uFF0C\u8BF7\u7A0D\u540E\u5237\u65B0\u9875\u9762\u67E5\u770B\u8282\u70B9\u6700\u65B0\u72B6\u6001\uFF01")),Z.prev=2,Z.next=5,(0,N.bS)();case 5:if(p=Z.sent,m=p.data,h=m.find(function(J){return J.nodeName===d.nodeName}),!((h==null?void 0:h.nodeStatus)===D.P7.RUNNING&&e.current)){Z.next=14;break}return n(!1),g.default.success("\u64CD\u4F5C\u6210\u529F"),e.current.reload(),z(0),Z.abrupt("return");case 14:Z.next=18;break;case 16:Z.prev=16,Z.t0=Z.catch(2);case 18:setTimeout(function(){R(d)},1e3*3);case 19:case"end":return Z.stop()}},P,null,[[2,16]])}));return function(d){return b.apply(this,arguments)}}(),V=[{title:"\u8282\u70B9\u540D\u79F0",dataIndex:"nodeName"},{title:"\u8282\u70B9\u90E8\u7F72\u4E3B\u673AIP",dataIndex:"nodeAddress"},{title:"\u8282\u70B9\u7248\u672C",dataIndex:"nodeVersion"},{title:"\u8FD0\u884C\u72B6\u6001",dataIndex:"nodeStatus",valueEnum:(o={},(0,C.Z)(o,D.P7.RUNNING,{text:"\u8FD0\u884C\u4E2D",status:"Success"}),(0,C.Z)(o,D.P7.WARNING,{text:"\u8FD0\u884C\u4E2D",status:"Warning"}),(0,C.Z)(o,D.P7.STOPPED,{text:"\u5DF2\u505C\u6B62",status:"Error"}),o)},{title:"\u64CD\u4F5C",valueType:"option",width:"15%",render:function(P,d){return[(0,c.jsx)("a",{onClick:function(){M(d)},children:"\u65E5\u5FD7"},"log"),d.nodeStatus===D.P7.STOPPED&&(0,c.jsx)("a",{onClick:(0,E.Z)((0,i.Z)().mark(function p(){var m;return(0,i.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n(!0),l.next=3,L(d);case 3:m=l.sent,m?setTimeout(function(){R(d)},1e3*3):n(!1);case 5:case"end":return l.stop()}},p)})),children:"\u542F\u52A8"},"start"),d.nodeStatus===D.P7.RUNNING&&(0,c.jsx)(y.Z,{title:"\u786E\u8BA4\u505C\u6B62\u8282\u70B9\uFF1F",onConfirm:(0,E.Z)((0,i.Z)().mark(function p(){var m;return(0,i.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n(!0),l.next=3,F(d);case 3:m=l.sent,n(!1),m&&e.current&&e.current.reload();case 6:case"end":return l.stop()}},p)})),children:(0,c.jsx)("a",{children:"\u505C\u6B62"})},"stop"),d.nodeStatus===D.P7.WARNING&&(0,c.jsx)(y.Z,{title:"\u786E\u8BA4\u91CD\u542F\u8282\u70B9\uFF1F",onConfirm:(0,E.Z)((0,i.Z)().mark(function p(){var m;return(0,i.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n(!0),l.next=3,U(d);case 3:m=l.sent,m?setTimeout(function(){R(d)},1e3*3):n(!1);case 5:case"end":return l.stop()}},p)})),children:(0,c.jsx)("a",{children:"\u91CD\u542F"})},"restart"),(0,c.jsx)(y.Z,{title:(0,c.jsxs)(c.Fragment,{children:["1\u3001\u8282\u70B9\u5347\u7EA7\u9700\u91CD\u542F",(0,c.jsx)("br",{}),"2\u3001\u5EFA\u8BAE\u5728\u5347\u7EA7\u4E4B\u524D\u81EA\u884C\u5907\u4EFD\u8282\u70B9\u6570\u636E",(0,c.jsx)("br",{}),"\u786E\u8BA4\u8FDB\u884C\u8282\u70B9\u5347\u7EA7\uFF1F"]}),onConfirm:(0,E.Z)((0,i.Z)().mark(function p(){var m;return(0,i.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return n(!0),l.next=3,W(d.nodeName);case 3:m=l.sent,m?setTimeout(function(){R(d)},1e3*3):n(!1);case 5:case"end":return l.stop()}},p)})),children:(0,c.jsx)("a",{children:"\u5347\u7EA7"})},"upgrade")]}}];return(0,c.jsxs)(T.ZP,{children:[(0,c.jsx)(B.Z,{message:"\u542F\u505C\u64CD\u4F5C\u5177\u6709\u98CE\u9669\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",type:"warning",showIcon:!0,style:{marginBottom:24}}),(0,c.jsx)(f.Z,{spinning:r,size:"large",children:(0,c.jsx)(j.ZP,{columns:V,search:!1,rowKey:"key",actionRef:e,request:(0,E.Z)((0,i.Z)().mark(function b(){var P,d,p;return(0,i.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,N.bS)();case 2:return P=h.sent,d=P.code,p=P.data,h.abrupt("return",{data:p||[],success:d===D.hN,total:p.length||0});case 6:case"end":return h.stop()}},b)})),postData:function(P){return P.map(function(d,p){return(0,_.Z)((0,_.Z)({},d),{},{key:p})})},options:{reload:!0,density:!1,setting:!1},pagination:{hideOnSinglePage:!0,showSizeChanger:!1,pageSize:10}})})]})};A.default=$},15491:function(Q,A,t){"use strict";t.d(A,{F_:function(){return K},bS:function(){return k},EQ:function(){return C},FB:function(){return i},oU:function(){return g},rj:function(){return O},Zt:function(){return j},c6:function(){return D},BM:function(){return c},I2:function(){return F},E1:function(){return U},F6:function(){return $},H5:function(){return o}});var u=t(90636),f=t(3182),_=t(64805);function K(a){return B.apply(this,arguments)}function B(){return B=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/deployNode",{method:"POST",body:r}));case 1:case"end":return e.stop()}},a)})),B.apply(this,arguments)}function k(){return y.apply(this,arguments)}function y(){return y=(0,f.Z)((0,u.Z)().mark(function a(){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,_.WY)("/citaNode/nodeLists"));case 1:case"end":return n.stop()}},a)})),y.apply(this,arguments)}function C(a){return w.apply(this,arguments)}function w(){return w=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/startNode",{method:"GET",params:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),w.apply(this,arguments)}function i(a){return I.apply(this,arguments)}function I(){return I=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/stopNode",{method:"GET",params:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),I.apply(this,arguments)}function g(a){return E.apply(this,arguments)}function E(){return E=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/queryLog",{method:"GET",params:r}));case 1:case"end":return e.stop()}},a)})),E.apply(this,arguments)}function O(a){return T.apply(this,arguments)}function T(){return T=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/updateNode",{method:"POST",data:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),T.apply(this,arguments)}function j(a){return N.apply(this,arguments)}function N(){return N=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/reStartNode",{method:"GET",params:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),N.apply(this,arguments)}function D(a){return S.apply(this,arguments)}function S(){return S=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/citaNode/deploymentExternalExistsNode",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),S.apply(this,arguments)}function c(a){return L.apply(this,arguments)}function L(){return L=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/nodeLog/statusTrace",{method:"GET",params:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),L.apply(this,arguments)}function F(a){return M.apply(this,arguments)}function M(){return M=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/nodeLog/openTrace",{method:"GET",params:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),M.apply(this,arguments)}function U(a){return W.apply(this,arguments)}function W(){return W=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/nodeLog/closeTrace",{method:"GET",params:{nodeName:r}}));case 1:case"end":return e.stop()}},a)})),W.apply(this,arguments)}function $(a){return v.apply(this,arguments)}function v(){return v=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/nodeLog/logFileSize",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),v.apply(this,arguments)}function o(a){return s.apply(this,arguments)}function s(){return s=(0,f.Z)((0,u.Z)().mark(function a(r){return(0,u.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.WY)("/nodeLog/clearLogFiles",{method:"POST",data:r}));case 1:case"end":return e.stop()}},a)})),s.apply(this,arguments)}}}]);
